# Self_drive

중앙대학교 자율주행 모형차량 경진대회 2기 로켓라쿤팀

포트폴리오 용 깃헙 자료

# 사용 부품 리스트

| 부품명           | 수량 | 용도          |
|:-----------------:|:----:|:--------------:|
| emax eco 1106    |  2   | 구동모터      |
| emax bullet 12A  |  2   | BLDC esc      |
| Raspberry pi 4   |  1   | 메인 MCU      |
| Raspberry pi pico|  1   | 센서 MCU      |
| TSL1401          |  1   | Line Scan     |
| picam v2         |  1   | Object Scan   |
| SR-04            |  1   | Emergency Stop|
| 2S Lipo battery  |  1   | Motor Power   |
| 5V 4A UPS        |  1   | MCU Power     |
| 18650 2000mA     |  2   | MCU Power     |
| 5V LED           |  2   | mission       |

# 주행로직

TSL1401으로 라인을 감지, 중앙값으로부터의 거리를 Error으로 판단, PID 제어

좌우 라인이 점선인지 실선인지 실시간 감지

양측이 실선이면 전방 장애물 감지하여 비상정지

양측 중 한 선이 점선이면 추월진행

주행 트랙의 조도를 TSL1401으로 감지하여 LED on/off 진행

우측 공백이 일정 시간 이상 있으면 주차선으로 인식, 주차 진행

주차 이후 카메라 인식, LLM으로 신호등 인식

# 코드 관련

rpi4 : C++

pico : Arduino IDE

# 차체 관련

애커만 방식(전륜 조향) 방식이 아닌 스키드 방식을 선택

스키드 방식은 전륜 조향 방식보다 회전각에서 더 많은 이점을 가지고 있음.

애커만 방식의 경우, 구조적으로 충분한 회전각이 나오지 않는다면 코너를 도는데 경로를 벗어나는 경우가 많음

또한 주차를 행할때 여러번의 수정이 필요한 경우가 있음. 따라서 스키드 방식을 선택, 효과적인 결과 얻음

실제 주행에서도 조도 문제로 미션 구간을 잘못 인식하는 경우가 아니라면 트랙을 벗어나는 경우가 한번도 없었음

# 두개의 카메라

파이캠의 경우 시야각 부족으로 트랙을 벗어나는 경우가 많이 발생함. 또한 주행 라인 처리에 있어서 많은 연산을 필요로함

따라서 2차원의 정보가 아닌 1차원의 정보만으로 주행을 함으로써 더 높은 연산 성능을 보여줌

이는 슬라이딩윈도우를 이용한 다른 팀들의 방식과 차별화된 점이며 효율적인 PID 제어가 가능하였고 주행 중 트랙을 벗어나는 경우가 거의 발생하지 않음

1차원 정보만으로는 색깔 인식을 할 수 없기에 신호등을 인식하기 위하여 2차원 카메라인 파이캠을 사용

단순히 사진만 찍어서 LLM에 전달하여 신호등 해석용도로 사용하였음

# SR-04

실제 차량에서도 자율주행에서 카메라만을 사용하지 않음

실제 차량에서도 사용하는 초음파 센서를 기반으로 긴급 제동, 회피 시스템을 만들고자 하였고 성공적이였음

# RPI4

C++ 기반으로 코드 작성, opencv를 이용하여 카메라 촬영 후 pico 로부터 신호 입력받으면 LLM api이용 신호등 인식

키입력을 받아 pico에 주행 모드 전송

# PICO

Arduino IDE이용 듀얼코어 사용

0번코어 -> SR-04 측정

1번코어 -> TSL1401 관련 연산, PID 제어 연산, RPi4 의 신호를 읽어 주행모드 결정, RPi4에 LLM 동작신호 전달